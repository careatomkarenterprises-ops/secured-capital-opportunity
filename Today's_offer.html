<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• URGENT ¬∑ 30% MONTHLY FOR 12 MONTHS ¬∑ TODAY ONLY üî•</title>
    
    <meta name="robots" content="noindex, nofollow">
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Signature Pad -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    
    <!-- Razorpay -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0c0b0f; color: #fff; }
        .gold-text { color: #ffd966; }
        .gold-bg { background-color: #ffd966; }
        .gold-border { border-color: #ffd966; }
        .glass-card { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .btn-glow:hover { box-shadow: 0 0 25px #ffd966; transform: scale(1.02); }
        .expiry-badge { background: #b91c1c; color: white; font-weight: 900; padding: 8px 20px; border-radius: 50px; display: inline-block; letter-spacing: 1px; }
        .fade-bg { background: radial-gradient(circle at top right, #3a2b1a, #0c0b0f 70%); }
        .urgent-border { border: 2px solid #ffd966; animation: pulse-border 1.5s infinite; }
        @keyframes pulse-border {
            0% { border-color: #ffd966; box-shadow: 0 0 0 0 rgba(255, 217, 102, 0.4); }
            70% { border-color: #ffb347; box-shadow: 0 0 15px 10px rgba(255, 180, 70, 0.2); }
            100% { border-color: #ffd966; box-shadow: 0 0 0 0 rgba(255, 217, 102, 0); }
        }
        .timer {
            font-size: 2.2rem;
            font-weight: 800;
            background: #1e1c24;
            padding: 0.5rem 1.5rem;
            border-radius: 60px;
            display: inline-block;
            border: 1px solid #ffd96644;
        }
        
        /* Onboarding Styles */
        .form-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            width: 100%;
            transition: all 0.3s;
        }
        .form-input:focus {
            outline: none;
            border-color: #ffd966;
            box-shadow: 0 0 0 3px rgba(255, 217, 102, 0.1);
        }
        .form-label {
            color: #9CA3AF;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 6px;
            display: block;
        }
        .required:after {
            content: " *";
            color: #EF4444;
        }
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
        }
        .checkbox-container input[type="checkbox"] {
            margin-top: 4px;
            accent-color: #ffd966;
        }
        .checkbox-container label {
            font-size: 14px;
            line-height: 1.5;
            color: #D1D5DB;
        }
        .btn-primary {
            background-color: #ffd966;
            color: black;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        .btn-primary:hover:not(:disabled) {
            background-color: #e5c255;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: transparent;
            color: #9CA3AF;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            border: 1px solid #4B5563;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        .success-badge {
            background-color: #10B981;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .progress-bar {
            height: 4px;
            background-color: #374151;
            border-radius: 2px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background-color: #ffd966;
            transition: width 0.5s ease;
        }
        .document-preview {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .document-preview h3 {
            color: #ffd966;
            font-size: 18px;
            margin-bottom: 16px;
        }
        .document-preview p {
            color: #D1D5DB;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        .document-preview ul {
            color: #D1D5DB;
            font-size: 14px;
            line-height: 1.6;
            margin-left: 20px;
            margin-bottom: 12px;
        }
        .payment-details {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #ffd966;
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
        }
        .alert-success {
            background-color: #10B98120;
            border: 1px solid #10B981;
            color: #10B981;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .signature-canvas {
            border: 2px dashed #ffd966;
            border-radius: 8px;
            background: white;
            cursor: crosshair;
            width: 100%;
            height: 150px;
        }
        .step-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s;
        }
        .step-active {
            background-color: #ffd966;
            color: black;
        }
        .step-inactive {
            background-color: #374151;
            color: #9CA3AF;
        }
        .step-completed {
            background-color: #10B981;
            color: white;
        }
        .hidden {
            display: none !important;
        }
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #ffd966;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .whatsapp-verify-container {
            background: rgba(37, 211, 102, 0.1);
            border: 2px solid #25D366;
            border-radius: 16px;
            padding: 24px;
            max-width: 500px;
            margin: 0 auto;
        }
        .verification-code-box {
            background: #1e1c24;
            border: 2px solid #ffd966;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            font-size: 32px;
            font-weight: 800;
            letter-spacing: 8px;
            color: #ffd966;
            margin: 20px 0;
        }
        .step-instruction {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #ffd966;
            padding: 12px 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        .resume-banner {
            background: #ffd96620;
            border: 1px solid #ffd966;
            border-radius: 50px;
            padding: 8px 16px;
            display: inline-block;
            margin-bottom: 20px;
            cursor: pointer;
        }
        .resume-banner:hover {
            background: #ffd96640;
        }
    </style>
</head>
<body class="fade-bg">

    <!-- Loading Overlay -->
    <div id="loading" class="hidden">
        <div class="spinner"></div>
    </div>

    <!-- TOP URGENT BANNER -->
    <div class="bg-red-600 text-white text-center py-2 text-sm font-black tracking-widest fixed top-0 w-full z-50 shadow-lg">
        ‚ö° ONLY FOR DEPLOYMENTS ON 19 FEB 2026 ¬∑ 7AM‚Äì11:59PM ¬∑ AUTO‚ÄëONBOARDING ACTIVE ‚ö°
    </div>

    <!-- NAVBAR -->
    <nav class="pt-16 pb-4 px-6 border-b border-white/10 bg-transparent">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="font-bold text-2xl tracking-tighter">
                OMKAR <span class="gold-text font-light">ENTERPRISES</span>
            </div>
            <div class="flex items-center gap-4">
                <div class="text-xs text-slate-400">üîí 1L‚Äì5L only</div>
                <button onclick="scrollToOnboarding()" class="text-xs gold-bg text-black px-4 py-2 rounded-full font-bold">START ONBOARDING ‚Üí</button>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="max-w-5xl mx-auto px-6 py-12">
        
        <!-- EXPIRY WARNING + TIMER -->
        <div class="flex flex-col items-center mb-10">
            <span class="expiry-badge mb-4">‚è≥ VALID ONLY FOR 19 FEB 2026</span>
            <div class="timer gold-text" id="countdownTimer">23:59:59</div>
            <p class="text-sm text-slate-400 mt-3">‚è∞ Auto‚Äëonboarding closes at midnight</p>
        </div>

        <!-- RESUME BANNER (shown if draft exists) -->
        <div id="resumeBanner" class="text-center hidden">
            <div class="resume-banner" onclick="resumeOnboarding()">
                üîÑ You have a draft in progress. Click here to resume.
            </div>
        </div>

        <!-- HERO SECTION -->
        <div class="text-center mb-16">
            <h1 class="text-5xl md:text-6xl font-black mb-6 leading-tight">
                <span class="gold-text">30%</span> EVERY MONTH<br>
                <span class="text-3xl md:text-4xl text-slate-300">for 12 months ¬∑ capital + interest</span>
            </h1>
            <p class="text-xl text-slate-300 max-w-3xl mx-auto">
                <span class="gold-text font-bold">TODAY ONLY:</span> Deploy ‚Çπ1,00,000 ‚Äì ‚Çπ5,00,000 and receive 
                <span class="font-bold text-white">30% of your amount monthly</span>
            </p>
        </div>

        <!-- NOTICE: 50K TRIAL EXCLUDED -->
        <div class="bg-red-900/30 border border-red-500/50 text-center py-4 px-6 rounded-2xl mb-16 max-w-2xl mx-auto">
            <p class="text-red-200 text-sm font-bold uppercase tracking-wider">‚õî NOT AVAILABLE FOR ‚Çπ50,000 TRIAL SLOT ‚õî</p>
        </div>

        <!-- EXAMPLE CARD (5 Lakhs) -->
        <div class="glass-card p-8 md:p-12 rounded-[3rem] urgent-border mb-16 max-w-4xl mx-auto">
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div>
                    <div class="text-4xl font-black gold-text mb-2">‚Çπ5,00,000</div>
                    <p class="text-slate-400">example deployment</p>
                    <div class="my-6 h-px bg-white/10"></div>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span>Monthly payout:</span>
                            <span class="font-bold text-2xl gold-text">‚Çπ1,50,000</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>‚Ü≥ Capital (8.33%):</span>
                            <span>‚Çπ41,650</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>‚Ü≥ Interest (21.67%):</span>
                            <span>‚Çπ1,08,350</span>
                        </div>
                        <div class="my-4 h-px bg-white/10"></div>
                        <div class="flex justify-between font-bold">
                            <span>Total over 12 months:</span>
                            <span class="text-2xl gold-text">‚Çπ18,00,000</span>
                        </div>
                    </div>
                </div>
                <div class="bg-black/40 p-6 rounded-3xl border border-white/5">
                    <h3 class="text-lg font-bold mb-4">üìå How it works</h3>
                    <ul class="space-y-3 text-sm">
                        <li class="flex gap-3"><span class="gold-text">1Ô∏è‚É£</span> Complete KYC & Agreement</li>
                        <li class="flex gap-3"><span class="gold-text">2Ô∏è‚É£</span> WhatsApp Verification</li>
                        <li class="flex gap-3"><span class="gold-text">3Ô∏è‚É£</span> View Payment Details</li>
                        <li class="flex gap-3"><span class="gold-text">4Ô∏è‚É£</span> Make Payment via UPI/Bank</li>
                        <li class="flex gap-3"><span class="gold-text">5Ô∏è‚É£</span> Get Confirmation Email</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDER / CALCULATOR -->
        <div class="glass-card p-8 rounded-[3rem] mb-16 max-w-3xl mx-auto">
            <h3 class="text-2xl font-bold text-center mb-8">‚ö° Calculate your 30% monthly</h3>
            <div class="max-w-sm mx-auto">
                <input type="range" id="amountSlider" min="100000" max="500000" step="10000" value="300000" class="w-full accent-[#ffd966] mb-4">
                <div class="text-center text-3xl font-bold gold-text mb-6" id="selectedAmount">‚Çπ3,00,000</div>
                <div class="bg-black/40 p-5 rounded-2xl space-y-3">
                    <div class="flex justify-between">
                        <span>Monthly payout:</span>
                        <span class="font-bold gold-text" id="monthlyPayout">‚Çπ90,000</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Total 12 months:</span>
                        <span class="gold-text" id="total12">‚Çπ10,80,000</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECURITY HIGHLIGHTS -->
        <div class="grid md:grid-cols-2 gap-6 mb-16 max-w-4xl mx-auto">
            <div class="glass-card p-6 rounded-2xl border-l-4 gold-border">
                <div class="text-2xl mb-2">üìú</div>
                <h4 class="font-bold text-lg">Notarised agreement</h4>
                <p class="text-sm text-slate-400">Digitally signed, legally binding</p>
            </div>
            <div class="glass-card p-6 rounded-2xl border-l-4 gold-border">
                <div class="text-2xl mb-2">üõ°Ô∏è</div>
                <h4 class="font-bold text-lg">‚Çπ5L capital security</h4>
                <p class="text-sm text-slate-400">Post‚Äëdated cheques + asset backing</p>
            </div>
        </div>

        <!-- ONBOARDING SECTION -->
        <div id="onboarding-section" class="glass-card p-8 rounded-[3rem] mb-16 max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-8 gold-text">‚ö° COMPLETE AUTO‚ÄëONBOARDING ‚ö°</h2>
            
            <!-- Progress Steps -->
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
            </div>
            <div class="flex justify-between mb-12">
                <div class="flex flex-col items-center">
                    <div id="step1" class="step-indicator step-active">1</div>
                    <span class="text-xs mt-2 text-gray-400">KYC</span>
                </div>
                <div class="flex flex-col items-center">
                    <div id="step2" class="step-indicator step-inactive">2</div>
                    <span class="text-xs mt-2 text-gray-400">Agreement</span>
                </div>
                <div class="flex flex-col items-center">
                    <div id="step3" class="step-indicator step-inactive">3</div>
                    <span class="text-xs mt-2 text-gray-400">Verify</span>
                </div>
                <div class="flex flex-col items-center">
                    <div id="step4" class="step-indicator step-inactive">4</div>
                    <span class="text-xs mt-2 text-gray-400">Payment</span>
                </div>
                <div class="flex flex-col items-center">
                    <div id="step5" class="step-indicator step-inactive">5</div>
                    <span class="text-xs mt-2 text-gray-400">Done</span>
                </div>
            </div>

            <!-- Step 1: Personal Details -->
            <div id="step1Content">
                <h3 class="text-xl font-bold mb-6">Personal Information (KYC)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div>
                        <label class="form-label required">Full Name</label>
                        <input type="text" id="fullName" class="form-input" placeholder="As per PAN Card" required>
                    </div>
                    <div>
                        <label class="form-label required">Email Address</label>
                        <input type="email" id="email" class="form-input" placeholder="you@example.com" required>
                    </div>
                    <div>
                        <label class="form-label required">WhatsApp Number</label>
                        <input type="tel" id="whatsapp" class="form-input" placeholder="+91 9876543210" required>
                    </div>
                    <div>
                        <label class="form-label required">PAN Number</label>
                        <input type="text" id="panNumber" class="form-input" placeholder="ABCDE1234F" required>
                    </div>
                    <div>
                        <label class="form-label required">Aadhaar Number</label>
                        <input type="text" id="aadhaarNumber" class="form-input" placeholder="1234 5678 9012" required>
                    </div>
                    <div>
                        <label class="form-label required">Date of Birth</label>
                        <input type="date" id="dob" class="form-input" required>
                    </div>
                    <div class="md:col-span-2">
                        <label class="form-label required">Full Address</label>
                        <textarea id="address" class="form-input" rows="2" placeholder="Complete postal address" required></textarea>
                    </div>
                </div>

                <h3 class="text-xl font-bold mb-4">Bank Details (for payouts)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div>
                        <label class="form-label required">Bank Name</label>
                        <input type="text" id="bankName" class="form-input" required>
                    </div>
                    <div>
                        <label class="form-label required">Account Holder Name</label>
                        <input type="text" id="accountHolderName" class="form-input" required>
                    </div>
                    <div>
                        <label class="form-label required">Account Number</label>
                        <input type="text" id="accountNumber" class="form-input" required>
                    </div>
                    <div>
                        <label class="form-label required">IFSC Code</label>
                        <input type="text" id="ifscCode" class="form-input" placeholder="SBIN0001234" required>
                    </div>
                </div>

                <button id="nextStep1Btn" class="btn-primary">Save & Continue to Agreement</button>
            </div>

            <!-- Step 2: Agreement & Signature -->
            <div id="step2Content" class="hidden">
                <h3 class="text-xl font-bold mb-6">Investment Agreement</h3>
                
                <div class="mb-8">
                    <label class="form-label required">Select Investment Amount</label>
                    <select id="investmentAmountConfirm" class="form-input" required>
                        <option value="100000">‚Çπ1,00,000 ‚Äî 30% monthly = ‚Çπ30,000/month</option>
                        <option value="200000">‚Çπ2,00,000 ‚Äî 30% monthly = ‚Çπ60,000/month</option>
                        <option value="300000">‚Çπ3,00,000 ‚Äî 30% monthly = ‚Çπ90,000/month</option>
                        <option value="400000">‚Çπ4,00,000 ‚Äî 30% monthly = ‚Çπ1,20,000/month</option>
                        <option value="500000" selected>‚Çπ5,00,000 ‚Äî 30% monthly = ‚Çπ1,50,000/month</option>
                    </select>
                </div>

                <div class="document-preview mb-8">
                    <h3>Loan Agreement Summary</h3>
                    <p><strong>Investment Amount:</strong> ‚Çπ<span id="confirmAmount">5,00,000</span></p>
                    <p><strong>Monthly Payout:</strong> ‚Çπ<span id="confirmMonthly">1,50,000</span></p>
                    <p><strong>Total Returns:</strong> ‚Çπ<span id="confirmTotal">18,00,000</span></p>
                    <p><strong>Term:</strong> 12 months</p>
                </div>

                <div class="mb-8">
                    <label class="form-label required">Digital Signature</label>
                    <canvas id="signatureCanvas" class="signature-canvas"></canvas>
                    <div class="flex gap-4 mt-4">
                        <button id="clearSignatureBtn" class="btn-secondary" style="width: auto;">Clear</button>
                    </div>
                </div>

                <div class="mb-8">
                    <div class="checkbox-container">
                        <input type="checkbox" id="agreeTerms" required>
                        <label>I have read and agree to the Loan Agreement terms</label>
                    </div>
                </div>

                <div class="flex gap-4">
                    <button id="prevStep2Btn" class="btn-secondary">Back</button>
                    <button id="nextStep2Btn" class="btn-primary">Sign & Continue</button>
                </div>
            </div>

            <!-- Step 3: WhatsApp Verification (CLEAN VERSION) -->
            <div id="step3Content" class="hidden">
                <h3 class="text-xl font-bold mb-6">üì± WhatsApp Verification</h3>
                
                <div class="whatsapp-verify-container">
                    <div class="text-center mb-4">
                        <img src="https://img.icons8.com/color/48/whatsapp--v1.png" alt="WhatsApp" class="mx-auto">
                        <p class="text-lg font-bold mt-2">Verify Your Number</p>
                    </div>

                    <div class="step-instruction">
                        <p class="text-sm"><span class="font-bold text-gold">Step 1:</span> Click the button below to send your verification code via WhatsApp</p>
                    </div>

                    <div class="verification-code-box" id="displayVerificationCode">123456</div>

                    <a id="whatsappVerifyLink" href="#" target="_blank" class="whatsapp-verify-btn w-full justify-center mb-4" style="display: flex; align-items: center; justify-content: center; gap: 8px; background: #25D366; color: white; padding: 12px; border-radius: 50px; text-decoration: none;">
                        <img src="https://img.icons8.com/color/24/whatsapp--v1.png" alt="WhatsApp"> 
                        Send Code via WhatsApp
                    </a>

                    <div class="step-instruction mt-4">
                        <p class="text-sm"><span class="font-bold text-gold">Step 2:</span> Enter the 6-digit code you received</p>
                    </div>

                    <div class="flex gap-2 mt-2">
                        <input type="text" id="verificationCode" class="form-input text-center text-2xl tracking-widest" maxlength="6" placeholder="123456">
                        <button id="verifyCodeBtn" class="btn-primary" style="width: auto; padding: 12px 24px;">Verify</button>
                    </div>

                    <p class="text-xs text-gray-400 mt-3 text-center">
                        Didn't receive? <button id="resendCodeBtn" class="gold-text underline font-bold">Generate new code</button>
                    </p>
                </div>

                <div class="flex gap-4 mt-8">
                    <button id="prevStep3Btn" class="btn-secondary">Back</button>
                </div>
            </div>

            <!-- Step 4: Payment Details (Shown AFTER verification) -->
            <div id="step4Content" class="hidden">
                <h3 class="text-xl font-bold mb-6">üí∞ Complete Your Investment</h3>
                
                <div class="success-badge mb-6" style="width: fit-content;">
                    <span>‚úì</span> WhatsApp Verified
                </div>

                <div class="payment-details">
                    <h4 class="text-xl font-bold mb-4 gold-text">Bank Transfer Details</h4>
                    
                    <div class="space-y-4">
                        <div class="flex justify-between py-2 border-b border-white/10">
                            <span class="text-gray-400">Bank Name:</span>
                            <span class="font-bold">Axis Bank</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-white/10">
                            <span class="text-gray-400">Account Name:</span>
                            <span class="font-bold">OMKAR ENTERPRISES</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-white/10">
                            <span class="text-gray-400">Account Number:</span>
                            <span class="font-bold">920010012345678</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-white/10">
                            <span class="text-gray-400">IFSC Code:</span>
                            <span class="font-bold">UTIB0000123</span>
                        </div>
                        <div class="flex justify-between py-2">
                            <span class="text-gray-400">Amount to Pay:</span>
                            <span class="font-bold text-2xl gold-text" id="paymentAmountDisplay">‚Çπ5,00,000</span>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-blue-900/30 rounded-xl">
                        <p class="text-sm text-blue-300">
                            ‚ö†Ô∏è <span class="font-bold">Important:</span> After making payment, click the button below to confirm.
                            Your agreement will be emailed only after payment confirmation.
                        </p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                    <button id="copyUpiBtn" class="btn-secondary" onclick="copyUPI()">
                        üìã Copy UPI ID
                    </button>
                    <button id="openUpiAppBtn" class="btn-secondary" onclick="openUpiApp()">
                        üì± Pay via UPI
                    </button>
                </div>

                <div class="mt-6">
                    <div class="checkbox-container">
                        <input type="checkbox" id="confirmPayment" required>
                        <label>I confirm that I have initiated payment of <span class="font-bold gold-text" id="confirmPaymentAmount">‚Çπ5,00,000</span></label>
                    </div>
                </div>

                <div class="flex gap-4 mt-6">
                    <button id="prevStep4Btn" class="btn-secondary">Back</button>
                    <button id="confirmPaymentBtn" class="btn-primary">Confirm Payment</button>
                </div>
            </div>

            <!-- Step 5: Completion -->
            <div id="step5Content" class="hidden">
                <div class="text-center">
                    <div class="success-badge text-2xl p-6 mb-6" style="font-size: 24px;">
                        <span>‚úì</span> INVESTMENT CONFIRMED!
                    </div>
                    
                    <h3 class="text-2xl font-bold mb-4">Welcome to Omkar Enterprises</h3>
                    
                    <div class="alert-success mb-6">
                        <p>‚úì Payment received successfully</p>
                        <p>‚úì Agreement sent to <span id="finalEmailDisplay"></span></p>
                        <p>‚úì WhatsApp confirmation sent</p>
                    </div>

                    <div class="text-left mb-8">
                        <h4 class="text-xl font-bold mb-4">Your Investment Details:</h4>
                        <div class="space-y-2">
                            <p>‚úì <strong>Investor ID:</strong> <span id="investorId" class="gold-text font-bold"></span></p>
                            <p>‚úì <strong>Investment:</strong> ‚Çπ<span id="finalAmount"></span></p>
                            <p>‚úì <strong>Monthly Payout:</strong> ‚Çπ<span id="finalMonthly"></span></p>
                            <p>‚úì <strong>First Payout:</strong> 1st March 2026</p>
                        </div>
                    </div>

                    <button onclick="downloadAgreement()" class="btn-primary" style="width: auto; padding: 12px 40px;">Download Agreement</button>
                </div>
            </div>
        </div>

        <!-- ACTION BUTTON -->
        <div class="text-center mb-16">
            <a id="whatsappBtn" href="#" class="inline-block gold-bg text-black px-12 py-5 rounded-full font-black text-xl btn-glow transition-all shadow-2xl">
                üì≤ CHAT ON WHATSAPP
            </a>
        </div>

        <!-- DISCLAIMER -->
        <div class="text-center text-xs text-slate-500 border-t border-white/10 pt-8">
            <p>Private arrangement ¬∑ Not a public offer ¬∑ Individual loan agreements</p>
            <p class="mt-2">care@omkarservices.in ¬∑ +91 70663 93830</p>
        </div>
    </main>

    <script>
        // ==================== CONFIGURATION ====================
        const CONFIG = {
            company: {
                name: "Omkar Enterprises",
                email: "care@omkarservices.in",
                whatsapp: "7066393830",
                upiId: "omkarservices@okaxis",
                bankDetails: {
                    bank: "Axis Bank",
                    accountName: "OMKAR ENTERPRISES",
                    accountNumber: "920010012345678",
                    ifsc: "UTIB0000123"
                }
            },
            emailService: {
                serviceId: "service_gpn4nxa",
                templateId: "template_tgrvynm",
                userId: "n45a20rU4_sBtNgdL"
            }
        };

        // Initialize EmailJS
        emailjs.init(CONFIG.emailService.userId);

        // ==================== GLOBAL VARIABLES ====================
        let currentStep = 1;
        let signaturePad;
        let investorData = {};
        let verificationCode = "";
        let paymentConfirmed = false;

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved draft
            loadDraft();
            
            // Initialize signature pad
            const canvas = document.getElementById('signatureCanvas');
            if (canvas) {
                signaturePad = new SignaturePad(canvas, {
                    backgroundColor: 'white',
                    penColor: 'black'
                });
            }
            
            document.getElementById('dob').max = new Date().toISOString().split('T')[0];
            document.getElementById('agreementDate').textContent = 
                new Date().toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
            
            updateSlider();
            updateConfirmAmount();
            checkResumeBanner();
        });

        // ==================== DRAFT SYSTEM ====================
        function saveDraft() {
            const draft = {
                investorData: investorData,
                currentStep: currentStep,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('omkar_draft', JSON.stringify(draft));
        }

        function loadDraft() {
            const saved = localStorage.getItem('omkar_draft');
            if (saved) {
                const draft = JSON.parse(saved);
                // Check if draft is less than 24 hours old
                const age = new Date() - new Date(draft.timestamp);
                if (age < 24 * 60 * 60 * 1000) {
                    investorData = draft.investorData || {};
                    currentStep = draft.currentStep || 1;
                } else {
                    localStorage.removeItem('omkar_draft');
                }
            }
        }

        function checkResumeBanner() {
            if (currentStep > 1 && currentStep < 5) {
                document.getElementById('resumeBanner').classList.remove('hidden');
            }
        }

        function resumeOnboarding() {
            showStep(currentStep);
            document.getElementById('resumeBanner').classList.add('hidden');
            scrollToOnboarding();
        }

        // ==================== SLIDER FUNCTIONS ====================
        const slider = document.getElementById('amountSlider');
        const whatsappBtn = document.getElementById('whatsappBtn');

        function updateSlider() {
            let amt = parseInt(slider.value);
            document.getElementById('selectedAmount').innerText = '‚Çπ' + amt.toLocaleString('en-IN');
            
            let monthly = Math.round(amt * 0.30);
            document.getElementById('monthlyPayout').innerText = '‚Çπ' + monthly.toLocaleString('en-IN');
            document.getElementById('total12').innerText = '‚Çπ' + (monthly * 12).toLocaleString('en-IN');

            let message = `I want to deploy ‚Çπ${amt.toLocaleString('en-IN')} under the 30% offer.`;
            whatsappBtn.href = 'https://api.whatsapp.com/send?phone=917066393830&text=' + encodeURIComponent(message);
        }
        slider.addEventListener('input', updateSlider);

        // ==================== TIMER ====================
        function updateTimer() {
            const now = new Date();
            const end = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59);
            let diff = end - now;
            if (diff < 0) diff = 0;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            document.getElementById('countdownTimer').innerText = 
                `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // ==================== NAVIGATION ====================
        window.scrollToOnboarding = function() {
            document.getElementById('onboarding-section').scrollIntoView({ behavior: 'smooth' });
        };

        function showStep(step) {
            currentStep = step;
            
            // Hide all steps
            for (let i = 1; i <= 5; i++) {
                const el = document.getElementById(`step${i}Content`);
                if (el) el.classList.add('hidden');
            }
            
            // Show current step
            document.getElementById(`step${step}Content`).classList.remove('hidden');
            
            // Update progress bar
            document.getElementById('progressFill').style.width = `${((step - 1) / 4) * 100}%`;
            
            // Update step indicators
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`step${i}`);
                if (i < step) {
                    indicator.className = 'step-indicator step-completed';
                } else if (i === step) {
                    indicator.className = 'step-indicator step-active';
                } else {
                    indicator.className = 'step-indicator step-inactive';
                }
            }
            
            saveDraft();
        }

        // ==================== UPDATE DISPLAYS ====================
        function updateConfirmAmount() {
            const amount = parseInt(document.getElementById('investmentAmountConfirm').value);
            const monthly = Math.round(amount * 0.30);
            
            document.getElementById('confirmAmount').textContent = amount.toLocaleString('en-IN');
            document.getElementById('confirmMonthly').textContent = monthly.toLocaleString('en-IN');
            document.getElementById('confirmTotal').textContent = (monthly * 12).toLocaleString('en-IN');
            document.getElementById('paymentAmountDisplay').textContent = '‚Çπ' + amount.toLocaleString('en-IN');
            document.getElementById('confirmPaymentAmount').textContent = '‚Çπ' + amount.toLocaleString('en-IN');
            document.getElementById('loanAmount').textContent = amount.toLocaleString('en-IN');
        }

        // ==================== STEP 1 ====================
        document.getElementById('nextStep1Btn').addEventListener('click', function() {
            const required = ['fullName', 'email', 'whatsapp', 'panNumber', 'aadhaarNumber', 'dob', 'address', 'bankName', 'accountHolderName', 'accountNumber', 'ifscCode'];
            for (const field of required) {
                if (!document.getElementById(field).value.trim()) {
                    alert('Please fill all required fields');
                    return;
                }
            }
            
            investorData.personal = {
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                whatsapp: document.getElementById('whatsapp').value,
                panNumber: document.getElementById('panNumber').value.toUpperCase(),
                aadhaarNumber: document.getElementById('aadhaarNumber').value,
                dob: document.getElementById('dob').value,
                address: document.getElementById('address').value
            };
            
            investorData.bank = {
                bankName: document.getElementById('bankName').value,
                accountHolderName: document.getElementById('accountHolderName').value,
                accountNumber: document.getElementById('accountNumber').value,
                ifscCode: document.getElementById('ifscCode').value.toUpperCase()
            };
            
            document.getElementById('lenderName').textContent = investorData.personal.fullName;
            showStep(2);
        });

        // ==================== STEP 2 ====================
        document.getElementById('investmentAmountConfirm').addEventListener('change', updateConfirmAmount);
        document.getElementById('prevStep2Btn').addEventListener('click', () => showStep(1));
        
        document.getElementById('nextStep2Btn').addEventListener('click', function() {
            if (!signaturePad || signaturePad.isEmpty()) {
                alert('Please provide your signature');
                return;
            }
            
            if (!document.getElementById('agreeTerms').checked) {
                alert('Please agree to the terms');
                return;
            }
            
            investorData.investment = {
                amount: parseInt(document.getElementById('investmentAmountConfirm').value)
            };
            
            investorData.signature = signaturePad.toDataURL();
            
            // Generate verification code
            verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            document.getElementById('displayVerificationCode').textContent = verificationCode;
            
            // Create WhatsApp link
            const verifyMessage = `Your Omkar verification code is: ${verificationCode}`;
            const phoneNumber = investorData.personal.whatsapp.replace(/\D/g, '');
            document.getElementById('whatsappVerifyLink').href = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodeURIComponent(verifyMessage)}`;
            
            showStep(3);
        });

        document.getElementById('clearSignatureBtn').addEventListener('click', () => signaturePad.clear());

        // ==================== STEP 3 ====================
        document.getElementById('prevStep3Btn').addEventListener('click', () => showStep(2));
        
        document.getElementById('verifyCodeBtn').addEventListener('click', function() {
            const enteredCode = document.getElementById('verificationCode').value;
            if (enteredCode === verificationCode) {
                showStep(4);
            } else {
                alert('Invalid verification code');
            }
        });
        
        document.getElementById('resendCodeBtn').addEventListener('click', function() {
            verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            document.getElementById('displayVerificationCode').textContent = verificationCode;
            
            const verifyMessage = `Your NEW Omkar verification code is: ${verificationCode}`;
            const phoneNumber = investorData.personal.whatsapp.replace(/\D/g, '');
            document.getElementById('whatsappVerifyLink').href = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodeURIComponent(verifyMessage)}`;
            
            alert('New code generated! Click WhatsApp button to send.');
        });

        // ==================== STEP 4 ====================
        document.getElementById('prevStep4Btn').addEventListener('click', () => showStep(3));
        
        document.getElementById('confirmPaymentBtn').addEventListener('click', async function() {
            if (!document.getElementById('confirmPayment').checked) {
                alert('Please confirm payment initiation');
                return;
            }
            
            document.getElementById('loading').classList.remove('hidden');
            
            try {
                // Generate Investor ID
                const timestamp = Date.now().toString().slice(-6);
                const initials = investorData.personal.fullName.split(' ').map(n => n[0]).join('').slice(0,3).toUpperCase();
                investorData.investorId = `OMK${initials}${timestamp}`;
                
                // Calculate monthly amount
                const monthlyAmount = Math.round(investorData.investment.amount * 0.30);
                
                // Send email ONLY after payment confirmation
                const templateParams = {
                    to_email: investorData.personal.email,
                    to_name: investorData.personal.fullName,
                    investor_id: investorData.investorId,
                    investment_amount: '‚Çπ' + investorData.investment.amount.toLocaleString('en-IN'),
                    monthly_payout: '‚Çπ' + monthlyAmount.toLocaleString('en-IN'),
                    message: `Payment confirmed! Your investment of ‚Çπ${investorData.investment.amount.toLocaleString('en-IN')} is active. Investor ID: ${investorData.investorId}`
                };
                
                await emailjs.send(
                    CONFIG.emailService.serviceId,
                    CONFIG.emailService.templateId,
                    templateParams
                );
                
                // Update completion screen
                document.getElementById('investorId').textContent = investorData.investorId;
                document.getElementById('finalAmount').textContent = investorData.investment.amount.toLocaleString('en-IN');
                document.getElementById('finalMonthly').textContent = monthlyAmount.toLocaleString('en-IN');
                document.getElementById('finalEmailDisplay').textContent = investorData.personal.email;
                
                // WhatsApp confirmation
                const confirmMsg = `‚úÖ Payment confirmed! ID: ${investorData.investorId}`;
                const phoneNumber = investorData.personal.whatsapp.replace(/\D/g, '');
                window.open(`https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodeURIComponent(confirmMsg)}`, '_blank');
                
                // Clear draft after successful completion
                localStorage.removeItem('omkar_draft');
                paymentConfirmed = true;
                
                showStep(5);
            } catch (error) {
                alert('Error confirming payment. Please contact us on WhatsApp.');
            } finally {
                document.getElementById('loading').classList.add('hidden');
            }
        });

        // ==================== PAYMENT FUNCTIONS ====================
        window.copyUPI = function() {
            navigator.clipboard.writeText(CONFIG.company.upiId);
            alert('UPI ID copied!');
        };

        window.openUpiApp = function() {
            const upiUrl = `upi://pay?pa=${CONFIG.company.upiId}&pn=Omkar%20Enterprises&am=${investorData.investment.amount}&cu=INR`;
            window.location.href = upiUrl;
        };

        window.downloadAgreement = function() {
            alert('Agreement download feature coming soon');
        };
    </script>
</body>
</html>