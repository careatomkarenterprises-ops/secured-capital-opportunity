<!DOCTYPE html>
<html>
<head>
    <title>Omkar API Fixed Test</title>
    <style>
        body { font-family: Arial; padding: 40px; background: #f4f7f6; text-align: center; }
        .box { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        input { padding: 12px; margin: 10px 0; width: 90%; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 12px; background: #1e3a8a; color: white; border: none; cursor: pointer; width: 95%; border-radius: 5px; font-weight: bold; }
        pre { background: #2d2d2d; color: #61dafb; padding: 15px; border-radius: 5px; text-align: left; overflow-x: auto; }
    </style>
</head>
<body>

<div class="box">
    <h2>Secure Login Test</h2>
    <input type="text" id="username" placeholder="Investor ID" value="TEST001">
    <input type="text" id="mobile" placeholder="WhatsApp Number" value="9876543210">
    <button onclick="runTest()">RUN TEST</button>
    <div id="result"></div>
</div>

<script>
async function runTest() {
    // PASTE YOUR NEW URL HERE
    const API_URL = "https://script.google.com/macros/s/AKfycbxzHXj7vDtYHDnR_Lm_eFUVbL4dZm1w89BkFH2dxQS--ai6RdluvpTa5YM7Rb6w5r_f/exec";
    
    const id = document.getElementById('username').value.trim();
    const phone = document.getElementById('mobile').value.trim();
    const resultDiv = document.getElementById('result');
    
    resultDiv.innerHTML = '<p>Connecting...</p>';

    // THE FIX: We put the data in the URL (GET) instead of a 'body' (POST)
    const finalUrl = `${API_URL}?action=verifyLogin&accessKey=${encodeURIComponent(id)}&mobile=${encodeURIComponent(phone)}`;

    try {
        // Simple fetch (No POST, No Headers = No CORS Error)
        const response = await fetch(finalUrl);
        const data = await response.json();
        
        resultDiv.innerHTML = '<h3>Server Response:</h3><pre>' + JSON.stringify(data, null, 2) + '</pre>';
    } catch (error) {
        resultDiv.innerHTML = '<h3 style="color:red;">Connection Blocked</h3><p>Ensure your script is deployed as "Anyone".</p>';
        console.error(error);
    }
}
</script>
</body>
</html>
